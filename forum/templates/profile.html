{% extends 'base.html' %}

{% block content %}
    {% include 'post_list.html' %}
{% endblock %}

{% block sidebar %}
<div class="sidebar">
    <svg width="160" height="160" data-jdenticon-value="user-{{ profile.user.username }}"></svg>
    <h1>{{ profile.display_name|default:profile.user.username }}</h1>
    <p>{{ profile.rendered_description|safe }}</p>

    {% if user in profile.subscribers.all %}
    <button id="subscription-button" hx-post="{% url 'unsubscribe_profile' profile.id %}" hx-target="#subscription-button" hx-swap="outerHTML">Unsubscribe</button>
    {% else %}
    <button id="subscription-button" hx-post="{% url 'subscribe_profile' profile.id %}" hx-target="#subscription-button" hx-swap="outerHTML">Subscribe</button>
    {% endif %}

    {% if user.is_authenticated and user == profile.user %}

    <a href="{% url 'edit_profile' %}">Edit Profile</a>

    <h2>Add a New Post</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Add Post</button>
    </form>
    {% endif %}
</div>
{% endblock %}

